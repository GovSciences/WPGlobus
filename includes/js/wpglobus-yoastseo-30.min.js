var WPGlobusYoastSeo;jQuery(document).ready(function(e){"use strict";var t;t=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:e("#wpglobus-wpseo-attr"),iB:e("#wpseo-meta-section-content"),t:e("#wpseo-meta-section-content"),ids:"",names:"",init:function(){t.start()},initAddKeywordPopup:function(){1===e("#wpseo-add-keyword-popup").length&&e(".wpseo-add-keyword").on("click",t.addKeywordPopup)},addKeywordPopup:function(){var t=e("#wpseo-add-keyword-popup").find("h3").html();tb_show(t,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){e(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},start:function(){e(t.wpseoTabSelector).tabs(),t.ids=t.attrs.data("ids"),t.names=t.attrs.data("names"),t.ids=t.ids+","+t.attrs.data("qtip"),t.ids=t.ids.split(","),t.names=t.names.split(","),e("#wpglobus-wpseo-tabs").insertBefore(t.iB),e(".wpseo-metabox-tabs").css({height:"26px"}),e(".wpglobus-wpseo-general").each(function(a,s){var o=e(s),i=o.data("language"),p="wpseo-meta-section-content_"+i;o.html('<div id="'+p+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+i+'">'+t.t.html()+"</div>"),e("#"+p+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+i),e("#"+p+" .wpseotab").attr("id","wpseo_content_"+i),e("#"+p).css({display:"block"}),e("#wpseo_meta").css({overflow:"hidden"}),e("#"+p+" .snippet_container").addClass("wpglobus-snippet_container"),i!==WPGlobusCoreData.default_language&&e("#"+p+" .wpseo-add-keyword").addClass("hidden"),e.each(t.names,function(t,a){e("#"+a).attr("name",a+"_"+i)}),e.each(t.ids,function(t,a){var s=e("#"+a);"wpseosnippet"==a&&s.addClass("wpglobus-wpseosnippet"),"snippet_title"==a&&s.addClass("wpglobus-snippet_title"),"snippet_meta"==a&&s.addClass("wpglobus-snippet_meta"),"snippet_cite"==a&&s.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==a&&s.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==a&&s.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==a&&s.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==a&&s.addClass("wpglobus-snippet_preview"),s.attr("id",a+"_"+i),e("#"+a+"_"+i).attr("data-language",i)});var n=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),i,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input_"+i).val(n),e("#yoast_wpseo_focuskw_"+i).val(n),i!==WPGlobusCoreData.default_language&&(e("#"+p+" #yoast_wpseo_focuskw_text_input_"+i).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),e("#"+p+" #wpseo-pageanalysis_"+i).addClass("hidden"))}),t.iB.addClass("hidden"),t.iB.css({height:0,overflow:"hidden"});var a=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input").val(a),e("#yoast_wpseo_focuskw").val(a),e(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(t){"#wpseo-meta-section-content"==e(this).attr("href")?e("#wpglobus-wpseo-tabs").css({display:"block"}):e("#wpglobus-wpseo-tabs").css({display:"none"})}),e("body").on("click",".wpglobus-post-body-tabs-list li",function(t){var a=e(this);if(a.hasClass("wpglobus-post-tab")){e("#wpglobus-wpseo-tabs").tabs("option","active",a.data("order"));var s=e("#yoast_wpseo_focuskw_text_input_"+e(this).data("language")).val();YoastSEO.app.rawData.keyword=s,e("#yoast_wpseo_focuskw_text_input").val(s),e('input[name="yoast_wpseo_focuskw"]').val(s),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),t.qtip(),t.initAddKeywordPopup()}};var a,s=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=e("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=e('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),e(document).on("blur",".wpglobus-snippet_title",function(t){var a=e(this),s=WPGlobusCore.getString(e("#yoast_wpseo_title").val(),a.text(),a.data("language"));YoastSEO.app.rawData.pageTitle=s,e('input[name="yoast_wpseo_title"]').val(s),e("#snippet_title").text(s)}),e(document).on("blur",".wpglobus-snippet_meta",function(t){var a=e(this),s=WPGlobusCore.getString(e("#yoast_wpseo_metadesc").val(),a.text(),a.data("language"));e("#yoast_wpseo_metadesc").val(s),e("#snippet_meta").text(s)}),e(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(t){var s=e(this),o=s.val();a.focuskw.val(o),a.focuskw_hidden.val(o),a.updateWpseoKeyword(o,s.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),e("#publish,#save-post").on("mouseenter",function(t){var s,o="";e(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(t,a){s=e(this),o=WPGlobusCore.getString(o,s.val(),s.data("language"))}),a.focuskw.val(o),a.focuskw_hidden.val(o)}).on("mouseleave",function(t){if(!a.focuskwKeep){a.wpseoTab=e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");e(this);a.focuskw.val(e("#yoast_wpseo_focuskw_text_input_"+a.wpseoTab).val()),a.focuskw_hidden.val(e("#yoast_wpseo_focuskw_text_input_"+a.wpseoTab).val())}}).on("click",function(e){a.focuskwKeep=!0}),e(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(t,s){if(s.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=e(a.post_slug).text();var o=e("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=o,a.focuskw.val(o),a.focuskw_hidden.val(o),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),a=this};s.prototype.getWPseoTab=function(){return e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},s.prototype.citeModification=function(t){var a="#snippet_citeBase_"+t,s="#snippet_cite_"+t,o=e("#wpseo-tab-"+t).data("yoast-cite-base"),i=e("#wpseo-tab-"+t).data("cite-contenteditable");i===!1&&e(s).attr("contenteditable","false"),e(a).text(o)},s.prototype.pageTitleModification=function(t){var s,o="#snippet_title_",i="",p="";return a.title_template==t?e.each(WPGlobusCoreData.enabled_languages,function(s,n){a.language=n,i=a.replaceVariablesPlugin(t),e(o+n).text(i),n==a.getWPseoTab()&&(p=i)}):(s=WPGlobusCore.getTranslations(t),e.each(WPGlobusCoreData.enabled_languages,function(t,n){a.language=n,i=""===s[n]?a.replaceVariablesPlugin(a.title_template):s[n],e(o+n).text(i),n==a.getWPseoTab()&&(p=i)})),p},s.prototype.metaDescModification=function(t){var s="#snippet_meta_";return e.each(WPGlobusCoreData.enabled_languages,function(o,i){e(s+i).text(WPGlobusCore.TextFilter(t,i,"RETURN_EMPTY")),a.citeModification(i)}),WPGlobusCore.TextFilter(t,a.getWPseoTab(),"RETURN_EMPTY")},s.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,a.getWPseoTab(),"RETURN_EMPTY")},s.prototype.contentModification=function(t){return a.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#content_"+a.getWPseoTab()).val()},s.prototype.titleModification=function(t){return setTimeout(a.updatePageAnalysis,1e3),a.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#title_"+a.getWPseoTab()).val()},s.prototype.defaultReplace=function(e){return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,WPGlobusCore.TextFilter(this.replaceVars.sitename,this.language)).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%sep%%/g,this.replaceVars.sep).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,YoastSEO.app.stringHelper.stripAllTags(YoastSEO.app.rawData.keyword))},s.prototype.replaceVariablesPlugin=function(e){return"undefined"!=typeof e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.doubleSepReplace(e)),e},s.prototype.titleReplace=function(t){var a="";return a=this.language==WPGlobusCoreData.default_language?e("#title").val():e("#title_"+this.language).val(),"undefined"==typeof a&&(a=YoastSEO.app.rawData.pageTitle),t=t.replace(/%%title%%/g,a)},s.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),a=new RegExp(t+" "+t,"g");return e=e.replace(a,this.replaceVars.sep)},s.prototype.updateWpseoKeyword=function(t,a){a!=WPGlobusCoreData.default_language&&(1==e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").length&&e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+a),e(".wpglobus-wpseo_keyword_"+a).text(t))},s.prototype.updatePageAnalysis=function(){e("#wpseo-pageanalysis_"+a.getWPseoTab()).html(e("#wpseo-pageanalysis").html())},window.WPGlobusYoastSeoPlugin=new s,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return"undefined"!=typeof WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),"undefined"!=typeof this.config.url&&(e[0].result=this.stringHelper.countMatches(this.config.url,this.keywordRegexInverse)),e}});
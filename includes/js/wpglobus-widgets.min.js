window.WPGlobusWidgets,function(a){var b;b=WPGlobusWidgets={init:function(){b.add_elements(),b.attachListeners()},add_elements:function(c,d){var e=[];e[0]='input[type="text"]',e[1]="textarea","undefined"==typeof c||"class"==c?(get_by_coid=".widget-liquid-right .widget .widget-content",a.each(e,function(a,c){b.make_clone(get_by_coid,c)})):"id"==c&&(get_by_coid="#"+d+" .widget-content",a.each(e,function(a,c){b.make_clone(get_by_coid,c)}))},make_clone:function(b,c){a(b+" "+c).each(function(b,d){var e,f,g,h=a(d);if(id=h.attr("id"),"undefined"==typeof id||-1!=id.indexOf("-number"))return!0;if(e=a("#"+id).clone(),a(h).addClass("wpglobus-dialog-field-source hidden"),f=h.attr("name"),a(e).attr("id","wpglobus-"+id),a(e).attr("name","wpglobus-"+f),a(e).attr("data-source-id",id),a(e).attr("class","wpglobus-dialog-field"),a(e).attr("style","width:90%;"),g=WPGlobusCore.TextFilter(a(h).val(),WPGlobusCoreData.language),a(e).val(g),a('<div style="width:20px;" data-type="control" data-source-type="" data-source-id="'+id+'" class="wpglobus-widgets wpglobus_dialog_start wpglobus_dialog_icon"></div>').insertAfter(h),a(e).insertAfter(h),'input[type="text"]'==c&&""!=g){var i=h.parents(".widget").attr("id");a("#"+i+" .in-widget-title").text(": "+g)}})},attachListeners:function(){a(document).ajaxComplete(function(c,d,e){if(-1!=e.data.indexOf("action=save-widget"))if(-1!=e.data.indexOf("delete_widget=1"));else{var f=e.data.split("widget-id=");f=f[1].split("&"),a(".widget-liquid-right .widget").each(function(c,d){var e=a(d).attr("id");-1!==e.indexOf(f[0])&&b.add_elements("id",e)})}}),a("body").on("change",".wpglobus-dialog-field",function(){var b,c=a(this),d="#"+c.data("source-id"),e="",f="";"undefined"!=typeof d&&(e=a(d).val(),/(\{:|\[:|<!--:)[a-z]{2}/.test(e)?(a.each(WPGlobusCoreData.enabled_languages,function(a,d){b=d==WPGlobusCoreData.language?c.val():WPGlobusCore.TextFilter(e,d,"RETURN_EMPTY"),""!=b&&(f+=WPGlobusCore.addLocaleMarks(b,d))}),a(d).val(f)):a(d).val(c.val()))})}}}(jQuery);
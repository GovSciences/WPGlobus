jQuery(document).ready(function(n){"use strict";var o={initDone:!1,languageSelectorBoxDelta:0,oldLanguageSelector:!1,languageSelectorEnabled:!0,parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},isOldLanguageSelector:function(){return o.oldLanguageSelector},init:function(){WPGlobusGutenberg.yoastSeo=o.parseBool(WPGlobusGutenberg.yoastSeo),o.initListeners(),o.setTabs(),o.formHandler(),o.attachListeners()},initListeners:function(){WPGlobusGutenberg.yoastSeo&&1==n(".yoast.wpseo-metabox").length&&n(window).on("beforeunload",function(e){e.stopImmediatePropagation()})},formHandler:function(){var e=n(".metabox-base-form #referredby").attr("value");void 0!==e&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),n(".metabox-base-form #referredby").attr("value",e)),void 0!==(e=n('input[name="_wp_original_http_referer"]').attr("value"))&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),n('input[name="_wp_original_http_referer"]').attr("value",e))},setTabs:function(){if(0!=WPGlobusGutenberg.tabs.length){o.oldLanguageSelector=!0;var t=setInterval(function(){var e=n(".edit-post-header__settings");1==e.length&&(e.before(WPGlobusGutenberg.tabs),clearInterval(t))},200)}},setSelectorStatus:function(){if(o.isOldLanguageSelector()){n(".wpglobus-gutenberg-selector-box").css({opacity:"0.2"}).attr("onclick","return false;"),o.languageSelectorEnabled=!1;var e=setInterval(function(){if(0==n(".is-saving").length){if(clearInterval(e),WPGlobusGutenberg.pagenow==WPGlobusGutenberg.postNewPage&&-1!=location.pathname.indexOf(WPGlobusGutenberg.postEditPage))return WPGlobusGutenberg.pagenow=WPGlobusGutenberg.postEditPage,n(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick",""),void o.reloadPage();o.languageSelectorEnabled=!0,n(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick","")}},400)}},reloadPage:function(){n(".wpglobus-selector-grid").css({"grid-template-columns":"10% 90%"}),n(".wpglobus-gutenberg-selector-text").text(WPGlobusGutenberg.i18n.reload),function e(){n(".wpglobus-gutenberg-selector").fadeOut(500).fadeIn(500,e)}(),setTimeout(function(){location.reload()},500)},attachListeners:function(){o.isOldLanguageSelector()&&(n(document).on("mouseenter",".wpglobus-gutenberg-selector",function(e){o.languageSelectorEnabled&&(n(".wpglobus-gutenberg-selector-dropdown").css({display:"block"}),o.languageSelectorBoxDelta=e.screenY,n(".edit-post-header").css({"z-index":"100000"}),n(".wpglobus-gutenberg-selector-box").css({"z-index":"100001"}))}),n(document).on("mouseleave",".wpglobus-gutenberg-selector",function(e){0!=o.languageSelectorBoxDelta&&e.screenY-o.languageSelectorBoxDelta<=0&&(n(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),n(".edit-post-header").css({"z-index":"9989"}),n(".wpglobus-gutenberg-selector-box").css({"z-index":"100"}))}),n(document).on("mouseleave",".wpglobus-gutenberg-selector-dropdown",function(e){n(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),n(".edit-post-header").css({"z-index":"9989"}),n(".wpglobus-gutenberg-selector-box").css({"z-index":"10000"})}),n(document).on("click",".editor-post-save-draft",function(){o.setSelectorStatus()}),n(document).on("click",".editor-post-publish-button",function(){o.setSelectorStatus()}))}};WPGlobusGutenberg=n.extend({},WPGlobusGutenberg,o),WPGlobusGutenberg.init()});